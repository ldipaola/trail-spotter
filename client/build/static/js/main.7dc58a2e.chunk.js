(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{42:function(e,t,a){e.exports=a(76)},47:function(e,t,a){},55:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),l=a.n(c),o=(a(47),a(48),a(49),a(1)),s=a.n(o),i=a(6),u=a(5),m=a(40),p=a(17),d=a(38),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GET_CUSTOMERS":return n;default:return e}},f=a(15),v={counter:0},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,a=t.type;t.payload;switch(a){case"INCREMENT":return Object(f.a)(Object(f.a)({},e),{},{counter:e.counter+1});default:return e}},E=Object(p.c)({customers:b,test:g}),h=[d.a],N=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d,w=Object(p.e)(E,N(p.a.apply(void 0,h))),O=a(7),j=a(4),y=(a(55),Object(n.createContext)(null)),x=a(11),k=a.n(x),C=function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,k.a.get("/logout").then((function(e){return t=e.data})).catch((function(e){console.log("Error:",e)}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function S(){var e=Object(j.f)(),t=Object(n.useContext)(y),a=t.user,c=t.setUser,l=function(){var t=Object(i.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,C();case 4:c(null),e.push("/"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("header",{className:"navbar p-2"},r.a.createElement("section",{className:"navbar-section text-bold"},r.a.createElement(O.b,{to:"/",className:"navbar-brand mr-2"},r.a.createElement("img",{src:"./cycle.png",alt:"cycle logo",height:"30",width:"40"})),r.a.createElement(O.b,{to:"/",className:"btn btn-link nav-link"},"Home"),a?r.a.createElement(O.b,{to:"/map",className:"btn btn-link nav-link"},"Map"):null,a&&a.isAdmin?r.a.createElement(O.b,{to:"/admin",className:"btn btn-link nav-link"},"Admin"):null),r.a.createElement("section",{className:"navbar-center"}),a?r.a.createElement("section",{className:"navbar-section"}," ",r.a.createElement(O.b,{to:"/logout",className:"btn",onClick:l},"Logout")):r.a.createElement("section",{className:"navbar-section"}," ",r.a.createElement(O.b,{to:"/signup",className:"btn btn-primary",style:{marginRight:"8px"}},"Sign Up"),r.a.createElement(O.b,{to:"/login",className:"btn"},"Login")," "))}var q=function(){var e=Object(i.a)(s.a.mark((function e(t,a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,k.a.post("/api/login",{email:t,password:a}).then((function(e){return n=e.data})).catch((function(e){console.log("Error:",e)}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function M(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(y),o=(l.user,l.setUser),m=Object(j.f)(),p=Object(n.useState)(""),d=Object(u.a)(p,2),b=d[0],f=d[1],v=Object(n.useState)(""),g=Object(u.a)(v,2),E=g[0],h=g[1],N=function(){var e=Object(i.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,q(b,E);case 3:a=e.sent,console.log(a),a?(o(a),m.push("/")):c(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container",style:{margin:"0.8em"}},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column col-3 col-mx-auto"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-title h5"},"Login to begin your adventure!"),a?r.a.createElement("p",{className:"form-input-hint",style:{color:"#E85600",margin:"0"}},"The email or password is invalid."):null),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form-horizontal",onSubmit:N},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-label",htmlFor:"login-email"},"Email"),r.a.createElement("input",{className:"form-input "+(a?"is-error":""),type:"text",id:"login-email",placeholder:"Email",onChange:function(e){return f(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("label",{className:"form-label",htmlFor:"login-password"},"Password"),r.a.createElement("input",{className:"form-input "+(a?"is-error":""),type:"password",id:"login-password",placeholder:"Password",onChange:function(e){return h(e.target.value)}})),r.a.createElement("button",{className:"btn"},"Login"))),r.a.createElement("div",{className:"card-footer"},"Don't have an account? Sign up ",r.a.createElement("a",{href:"/signup"},"here"))))))}function D(){var e=Object(n.useContext)(y).setUser,t=Object(j.f)(),a=Object(n.useState)(""),c=Object(u.a)(a,2),l=c[0],o=c[1],m=Object(n.useState)(""),p=Object(u.a)(m,2),d=p[0],b=p[1],f=function(){var a=Object(i.a)(s.a.mark((function a(n){var r;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.prev=1,a.next=4,k.a.post("/api/signup",{email:l,password:d});case 4:return a.next=6,q(l,d);case 6:r=a.sent,console.log(r),r&&(e(r),t.push("/")),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.log(a.t0);case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"container",style:{margin:"0.8em"}},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column col-3 col-mx-auto"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-title h5"},"Signup to begin your adventure!")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form-horizontal",onSubmit:f},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-label",htmlFor:"login-email"},"Email"),r.a.createElement("input",{className:"form-input",type:"text",id:"login-email",placeholder:"Email",onChange:function(e){return o(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("label",{className:"form-label",htmlFor:"login-password"},"Password"),r.a.createElement("input",{className:"form-input",type:"password",id:"login-password",placeholder:"Password",onChange:function(e){return b(e.target.value)}})),r.a.createElement("button",{className:"btn"},"Create account"))),r.a.createElement("div",{className:"card-footer"},"Already have an account? Log in ",r.a.createElement("a",{href:"/login"},"here"))))))}var L=a(39),P=a.n(L);function T(){var e=Object(n.useContext)(y).user,t="",a=Object(n.useState)(null),c=Object(u.a)(a,2),l=c[0],o=c[1];return Object(n.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/blog");case 3:t=e.sent,o(t.data.posts),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]),t=l?l.map((function(e,t){return r.a.createElement("div",{key:t,className:"card",style:{borderStyle:"none"}},r.a.createElement("div",{className:"card-image"}),r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-title h5"},e.title),r.a.createElement("div",{className:"card-subtitle text-gray"},"By: ",e.author," ",P()(e.date).format("dddd, D MMMM YYYY"))),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",null,e.body)),r.a.createElement("div",{className:"card-footer"}))})):r.a.createElement("div",{className:"container grid-lg",style:{marginTop:"2em"}},r.a.createElement("h1",null,"Test Post"),r.a.createElement("h3",null),r.a.createElement("p",null,"Donec a volutpat quam. Curabitur nec varius justo, sed rutrum ligula. Curabitur pellentesque turpis sit amet eros iaculis, a mollis arcu dictum. Ut vel ante eget massa ornare placerat. Etiam nisl orci, finibus sodales volutpat et, hendrerit ut dolor. Suspendisse porta dictum nunc, sed pretium risus rutrum eget. Nam consequat, ligula in faucibus vestibulum, nisi justo laoreet risus, luctus luctus mi lacus sit amet libero. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Mauris pretium condimentum tellus eget lobortis. Interdum et malesuada fames ac ante ipsum primis in faucibus. Donec placerat accumsan mi, ut congue neque placerat eu. Donec nec ipsum in velit pellentesque vehicula sit amet at augue. Maecenas aliquam bibendum congue. Pellentesque semper, lectus non ullamcorper iaculis, est ligula suscipit velit, sed bibendum turpis dui in sapien.")),r.a.createElement("div",{className:"container grid-lg",style:{marginTop:"2em"}},r.a.createElement("h1",null,"Welcome"),r.a.createElement("p",null,"Donec a volutpat quam. Curabitur nec varius justo, sed rutrum ligula. Curabitur pellentesque turpis sit amet eros iaculis, a mollis arcu dictum. Ut vel ante eget massa ornare placerat. Etiam nisl orci, finibus sodales volutpat et, hendrerit ut dolor. Suspendisse porta dictum nunc, sed pretium risus rutrum eget. Nam consequat, ligula in faucibus vestibulum, nisi justo laoreet risus, luctus luctus mi lacus sit amet libero. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Mauris pretium condimentum tellus eget lobortis. Interdum et malesuada fames ac ante ipsum primis in faucibus. Donec placerat accumsan mi, ut congue neque placerat eu. Donec nec ipsum in velit pellentesque vehicula sit amet at augue. Maecenas aliquam bibendum congue. Pellentesque semper, lectus non ullamcorper iaculis, est ligula suscipit velit, sed bibendum turpis dui in sapien."),e?r.a.createElement(O.b,{to:"/map",className:"btn"},"Get started"):r.a.createElement(O.b,{to:"/login",className:"btn"},"Get started"),t)}function U(e){Object(n.useContext)(y).user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(T,null))}function A(){var e=Object(n.useState)({}),t=Object(u.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){k.a.get("/api/user_data").then((function(e){console.log(e),c(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome"),r.a.createElement("p",null,a.id,r.a.createElement("br",null),a.email),r.a.createElement("p",null))}function _(){var e=Object(n.useState)({author:"",title:"",body:""}),t=Object(u.a)(e,2),a=t[0],c=t[1],l=function(e){var t=e.target.value;"input-author"===e.target.id&&c(Object(f.a)(Object(f.a)({},a),{},{author:t})),"input-title"===e.target.id&&c(Object(f.a)(Object(f.a)({},a),{},{title:t})),"input-message"===e.target.id&&c(Object(f.a)(Object(f.a)({},a),{},{body:t}))},o=function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,fetch("/api/post",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a)});case 4:n=e.sent,console.log(n),Array.from(document.querySelectorAll("input, textarea")).forEach((function(e){return e.value=""})),c({author:"",title:"",body:""}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:o},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-label",htmlFor:"input-author"},"Author"),r.a.createElement("input",{className:"form-input",type:"text",id:"input-author",placeholder:"Author",onChange:l}),r.a.createElement("label",{className:"form-label",htmlFor:"input-title"},"Title"),r.a.createElement("input",{className:"form-input",type:"text",id:"input-title",placeholder:"Title",onChange:l}),r.a.createElement("label",{className:"form-label",htmlFor:"input-message"},"Message"),r.a.createElement("textarea",{className:"form-input",id:"input-message",placeholder:"",rows:"4",onChange:l}),r.a.createElement("button",{className:"btn btn-primary",style:{margin:"4px 4px 0 0"}},"Post")))}function F(){var e=Object(n.useState)(_),t=Object(u.a)(e,2);t[0],t[1];return r.a.createElement("div",{className:"container grid-lg"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column col-4"},r.a.createElement("ul",{style:{listStyle:"none"}},r.a.createElement("li",null,r.a.createElement("button",{style:{width:"180px"},className:"btn"},"New Post")),r.a.createElement("li",null,r.a.createElement("button",{style:{width:"180px"},className:"btn"},"Edit and Delete posts")),r.a.createElement("li",null,r.a.createElement("button",{style:{width:"180px"},className:"btn"},"Manage Markers")),r.a.createElement("li",null,r.a.createElement("button",{style:{width:"180px"},className:"btn"},"Users")))),r.a.createElement("div",{className:"column col-8"},r.a.createElement(_,null))))}a(75);function I(){return r.a.createElement("div",{className:"hero hero-image"},r.a.createElement("div",{className:"hero-text"},r.a.createElement("h1",null,"Trail Spotter"),r.a.createElement("h3",null,"Explore and share places!")))}var W=a(41),z=a(20),R=["places"],Y={width:"100vw",height:"94.5vh"},B={disableDefaultUI:!0,zoomControl:!0},G={lat:-37.813629,lng:144.963058};function J(){Object(n.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/location");case 3:t=e.sent,f(t.data.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var e=Object(z.d)({googleMapsApiKey:"AIzaSyCdg28yKqg-tgH72I6wPWle21WdCnCxOr8",libraries:R}),t=e.isLoaded,a=e.loadError,c=Object(n.useState)(null),l=Object(u.a)(c,2),o=l[0],m=l[1],p=Object(n.useState)([]),d=Object(u.a)(p,2),b=d[0],f=d[1],v=Object(n.useRef)(),g=Object(n.useCallback)((function(e){var t=prompt("Enter location name:"),a=prompt("Enter location description:");t&&""!==t.trim()&&(f((function(n){return[].concat(Object(W.a)(n),[{location:{coordinates:[e.latLng.lng(),e.latLng.lat()]},placeName:t,description:a,date:new Date}])})),function(){var n=Object(i.a)(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,k.a.post("/api/location",{location:{coordinates:[e.latLng.lng(),e.latLng.lat()]},placeName:t,description:a});case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),console.error(n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])})));return function(){return n.apply(this,arguments)}}()())})),E=Object(n.useCallback)((function(e){v.current=e}));return a?"Error loading map":t?r.a.createElement("div",{className:"flex-centered",style:{margin:"0 0 0 0"}},r.a.createElement(z.a,{mapContainerStyle:Y,zoom:8,center:G,options:B,onClick:g,onLoad:E},b.map((function(e){return r.a.createElement(z.c,{key:e.date,position:{lat:e.location.coordinates[1],lng:e.location.coordinates[0]},icon:{url:"./bicycle.svg",scaledSize:new window.google.maps.Size(30,30),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(15,15)},onClick:function(){m(e)}})})),o?r.a.createElement(z.b,{position:{lat:o.location.coordinates[1],lng:o.location.coordinates[0]},onCloseClick:function(){m(null)}},r.a.createElement("div",null,r.a.createElement("h2",null,o.placeName),o.description?r.a.createElement("p",null,o.description):null,r.a.createElement("p",null,"Lat: ",o.location.coordinates[1]," Lng: ",o.location.coordinates[0]))):null)):"Loading Map.."}var H=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useMemo)((function(){return{user:a,setUser:c}}),[a,c]);return Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/userAuthenticated");case 2:return t=e.sent,e.next=5,t.json();case 5:t=e.sent,c(t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement(m.a,{store:w},r.a.createElement(O.a,null,r.a.createElement("div",null,r.a.createElement(j.c,null,r.a.createElement(y.Provider,{value:l},r.a.createElement(S,null),r.a.createElement(j.c,null,r.a.createElement(j.a,{path:"/map"}),r.a.createElement(I,null)),r.a.createElement(j.a,{path:"/login",component:M}),r.a.createElement(j.a,{path:"/signup",component:D}),r.a.createElement(j.a,{exact:!0,path:"/",component:U}),r.a.createElement(j.a,{path:"/map",component:J}),r.a.createElement(j.a,{path:"/user",component:A}),r.a.createElement(j.a,{path:"/admin",component:F}))))))},K=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function X(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(r.a.createElement(H,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");K?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):X(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):X(e)}))}}()}},[[42,1,2]]]);
//# sourceMappingURL=main.7dc58a2e.chunk.js.map